<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#27ae60"><meta name="twitter:card" content="summary"><meta property="og:title" content="Minecraft Legacy Docs"><meta property="og:description" content="Just playing around"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><title>MCR Structure | Minecraft Legacy Docs</title><meta name="description" content="Just playing around">
    <link rel="preload" href="/Legacy-Docs/assets/style-8d84a2a0.css" as="style"><link rel="stylesheet" href="/Legacy-Docs/assets/style-8d84a2a0.css">
    <link rel="modulepreload" href="/Legacy-Docs/assets/app-4eb6b952.js"><link rel="modulepreload" href="/Legacy-Docs/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/Legacy-Docs/assets/index.html-c8107b3d.js"><link rel="modulepreload" href="/Legacy-Docs/assets/index.html-b03e4dbc.js"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-49f80bbd.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-c442ba3a.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-d14bf1c1.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-224ee5f9.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-a3cdca10.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-7f22ae38.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-9fefc562.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-84e90c20.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-31322366.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-002ebaab.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-ea2e9e63.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-7fff35d2.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-8fa643bb.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-b69c1892.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-ff702c2f.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-396c1e92.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-5688077e.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-017938cc.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-f4200627.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/index.html-abe5fb8b.js" as="script"><link rel="prefetch" href="/Legacy-Docs/assets/404.html-87d54bd8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/Legacy-Docs/" class=""><!----><span class="site-name">Minecraft Legacy Docs</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/ModifiedCommand/Legacy-Docs" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/ModifiedCommand/Legacy-Docs" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Home <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Legacy-Docs/" class="sidebar-item" aria-label="Legacy-Docs"><!--[--><!--]--> Legacy-Docs <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Legacy Save Files <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Legacy-Docs/Saves/" class="router-link-active sidebar-item" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Legacy-Docs/Saves/MCR/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="MCR Structure"><!--[--><!--]--> MCR Structure <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Legacy-Docs/Saves/MCR/#_1-chunk-index-0x0000-0x0fff" class="router-link-active router-link-exact-active sidebar-item" aria-label="1. Chunk Index [0x0000..0x0FFF]"><!--[--><!--]--> 1. Chunk Index [0x0000..0x0FFF] <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Legacy-Docs/Saves/MCR/#_2-chunk-timestamps-0x1000-0x1fff" class="router-link-active router-link-exact-active sidebar-item" aria-label="2. Chunk Timestamps [0x1000..0x1FFF]"><!--[--><!--]--> 2. Chunk Timestamps [0x1000..0x1FFF] <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Legacy-Docs/Saves/MCR/#_3-chunk-data-0x2000" class="router-link-active router-link-exact-active sidebar-item" aria-label="3. Chunk Data [0x2000..]"><!--[--><!--]--> 3. Chunk Data [0x2000..] <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/Legacy-Docs/Saves/ChunkData/" class="sidebar-item" aria-label="Chunk Data"><!--[--><!--]--> Chunk Data <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Legacy Filetypes <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Legacy-Docs/Formats/" class="sidebar-item" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a><!----></li><li><a href="/Legacy-Docs/Formats/ARC/" class="sidebar-item" aria-label="ARC"><!--[--><!--]--> ARC <!--[--><!--]--></a><!----></li><li><a href="/Legacy-Docs/Formats/COL/" class="sidebar-item" aria-label="COL"><!--[--><!--]--> COL <!--[--><!--]--></a><!----></li><li><a href="/Legacy-Docs/Formats/LOC/" class="sidebar-item" aria-label="LOC"><!--[--><!--]--> LOC <!--[--><!--]--></a><!----></li><li><a href="/Legacy-Docs/Formats/Material/" class="sidebar-item" aria-label="Material"><!--[--><!--]--> Material <!--[--><!--]--></a><!----></li><li><a href="/Legacy-Docs/Formats/Models/" class="sidebar-item" aria-label="Models"><!--[--><!--]--> Models <!--[--><!--]--></a><!----></li><li><a href="/Legacy-Docs/Formats/PCK/" class="sidebar-item" aria-label="PCK"><!--[--><!--]--> PCK <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="mcr-structure" tabindex="-1"><a class="header-anchor" href="#mcr-structure" aria-hidden="true">#</a> MCR Structure</h1><h2 id="_1-chunk-index-0x0000-0x0fff" tabindex="-1"><a class="header-anchor" href="#_1-chunk-index-0x0000-0x0fff" aria-hidden="true">#</a> 1. Chunk Index <code>[0x0000..0x0FFF]</code></h2><ul><li>The first 0x1000 bytes of a <code>.mcr</code> file is dedicated to 1024 (32x32) chunk indicies, despite the fact that only 27x27 chunks are used. They are in order of XZ index. Each 4 bytes represents a chunk offset like so:</li></ul><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token number">00</span> <span class="token number">00</span> <span class="token number">02</span> <span class="token number">01</span>
<span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span> <span class="token operator">^</span><span class="token operator">^</span>
Offset   Length
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The offset and length can be multiplied by 0x1000 to get the actual values. if a chunk offset has all zeros, that means the chunk does not exist.</li><li>The offset points to a position in the mcr where the chunk&#39;s data is stored. The length specifies how many <code>0x1000</code> blocks the compressed chunk data takes up.</li></ul><h2 id="_2-chunk-timestamps-0x1000-0x1fff" tabindex="-1"><a class="header-anchor" href="#_2-chunk-timestamps-0x1000-0x1fff" aria-hidden="true">#</a> 2. Chunk Timestamps <code>[0x1000..0x1FFF]</code></h2><ul><li>The next 0x1000 bytes are supposedly (according to miku) timestamps of the chunks, for some reason. Maybe it was the timestamp of when the chunk was last edited? I&#39;m not sure.</li></ul><h2 id="_3-chunk-data-0x2000" tabindex="-1"><a class="header-anchor" href="#_3-chunk-data-0x2000" aria-hidden="true">#</a> 3. Chunk Data <code>[0x2000..]</code></h2><ul><li>The rest of the <code>.mcr</code> file is dedicated to storing the actual chunk&#39;s data. The size of the chunk data is shown in the chunk index, multiplied by <strong>0x1000</strong>, so if the length is 03, <strong>0x3000</strong> bytes are reserved for the chunk data. Missing chunks are not stored here. You can tell where a chunk&#39;s data starts if it has the bytes <code>C0</code> or <code>80</code> at the beginning.</li></ul><p><strong>A chunk&#39;s data is stored like so:</strong><br> The first 8 bytes contain the decompressed and compressed sizes of the chunk (not including the header here):</p><div class="language-diff line-numbers-mode" data-ext="diff"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> C0 00 02 EB 00 00 0C 73
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ^^^^^^^^^^^ ^^^^^^^^^^^
</span><span class="token prefix unchanged"> </span><span class="token line"> Compressed  Decompressed
</span><span class="token prefix unchanged"> </span><span class="token line"> Size &amp; Bits Size
</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>The first two bits of the compressed size are two flags that define stuff like RLE compression. The first bit defines whether or not the compressed chunk data is RLE compressed, but the second bit&#39;s purpose is unknown at the moment.</li></ul><blockquote><p>(You can safely remove the bits from the compressed size by doing an AND operation: <code>0xC00002EB &amp; 0x3FFFFFFF = 0x000002EB</code>)</p></blockquote><p>The rest of the data is the compressed chunk data (XMEM for Xbox 360, Deflate for PS3, or ZLIB for Wii U), along with RLE compression. The compressed size shows how big the data is before it ends (there may be some trailing bytes at the end, I&#39;m not sure what those mean exactly yet).</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/ModifiedCommand/Legacy-Docs/edit/main/docs/Saves/MCR/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 33438654+PiSaucer@users.noreply.github.com">PiSaucer</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Legacy-Docs/Saves/" class="router-link-active" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></span><span class="next"><a href="/Legacy-Docs/Saves/ChunkData/" class="" aria-label="Chunk Data"><!--[--><!--]--> Chunk Data <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/Legacy-Docs/assets/app-4eb6b952.js" defer></script>
  </body>
</html>
